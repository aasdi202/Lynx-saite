<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LYNX Web3 Dashboard</title>
  <style>
    body {
      background-color: #0f0f0f;
      color: #00ff99;
      font-family: 'Courier New', monospace;
      text-align: center;
      padding: 40px;
    }
    h1 {
      font-size: 2em;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      background-color: #00ff99;
      color: #0f0f0f;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .info {
      margin-top: 30px;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>LYNX Web3 Dashboard</h1>
  <button onclick="connectWallet()">اتصال متامسک</button>
  <div class="info" id="walletInfo"></div>
  <div class="info" id="lynxBalance"></div>

  <script>
    const tokenAddress = "0xbd61721063343EC6CCD7c077a11c1cD200AAFB40"; // آدرس توکن LYNX
    const tokenABI = [
      "function balanceOf(address owner) view returns (uint256)",
      "function decimals() view returns (uint8)"
    ];

    async function connectWallet() {
      if (window.ethereum) {
        try {
          const [account] = await window.ethereum.request({ method: "eth_requestAccounts" });
          document.getElementById("walletInfo").innerText = "آدرس کیف پول: " + account;
          await showTokenBalance(account);
        } catch (error) {
          document.getElementById("walletInfo").innerText = "اتصال به کیف پول لغو شد.";
        }
      } else {
        alert("لطفاً افزونه MetaMask را نصب کنید.");
      }
    }

    async function showTokenBalance(account) {
      const provider = new ethers.providers.Web3Provider(window.ethereum);
      const contract = new ethers.Contract(tokenAddress, tokenABI, provider);
      const decimals = await contract.decimals();
      const balance = await contract.balanceOf(account);
      const formatted = balance / (10 ** decimals);
      document.getElementById("lynxBalance").innerText = "موجودی توکن LYNX: " + formatted;
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
</body>
</html>
